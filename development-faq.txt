development memo
開発者のメモです。何かをお約束するものではありません。

------
Q.
機能が中途半端なようですが？

A.
当面は僕自身の使用のために開発していますので、
そのフェーズの間はずっと中途半端なままだと思います。
（自分で必要になった機能からしかつけていきません）

------
Q.
ユニットテストがちゃんとしていない様ですが？

A.
PDF生成エンジンということなので、おそらくきちんとユニットテストを行うためには、
Selenium等の様なもののPDF版みたいなものを作らなければなりません。
ああいったテストツールの作成は、PDFエンジン自体の開発よりも難しいです。
＃　Webサイトが大量にあるために、htmlの場合はそういうコストが回収可能でしょうけど、
＃　PDFエンジンを作るためだけに整備すると考えると、少々難しい気がします。

Apache PDFBox辺りを引っ張って来ることで、自動化可能なテスト範囲が広がることは分かっていますが、
広がる範囲はそんなに大きくなさそうなので、現状、中途半端なユニットテストになっています。

まともなものに置き換える予定は今の所ありませんが、
銀の弾をお持ちの方がいましたら、ご意見お待ちしております。

------
Q.
iTextを始めとして、いくつか代表的なPDFエンジンはあります。
どうしてPDFエンジンまで自作したのか？

A.
最初、PDFエンジンにはiText等の既存のものを使うことを思い描いていました。
ところがiTextは、いつの間にかライセンスがAGPLになっていたので、使い辛かったのです。
また、タグ付きPDF、日本語対応、縦書き対応、、、といった要望を満たすものを、
わざわざ調べて後々のメンテやライセンスを気にするぐらいなら、自分で作ってしまえと思いました。

------
Q.
フォントが……

A.
たぶんフォントデータがめちゃくちゃです。
後でいくらでも直せる様にはなっているはずです。
＃　YiPdfFileとYiPdfFontの文脈境界を少しいじるだけで良いはずで、
＃　他にはほとんど影響がないはずです。

------
Q.
PDFエンジンとPDFレイアウトエンジン（html→PDF）が抱き合わせになっている理由は？

A.
ないので、そのうち切り離すかもしれません。
